(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(30),c=n.n(r),i=(n(37),n(15)),o=n(3),l=n(4),u=n(6),h=n(5),j=(n(38),n(7)),d=n(9),p=n(2),b=n.n(p),m=function(e,t){return b.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return console.log(e),e.data})).catch((function(e){return e.response.data}))},O=function(e,t){return b.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},g=n(0);function x(e){var t=function(){b.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){e.setUser(null)}))};return Object(g.jsxs)("div",{className:"Nav",children:[e.user?Object(g.jsxs)("p",{children:["logged in as: ",e.user.username]}):Object(g.jsx)(g.Fragment,{}),Object(g.jsx)("img",{src:"/images/logo.jpg",alt:"logo"}),Object(g.jsxs)("ul",{className:"NavButtons",children:[Object(g.jsx)("li",{children:Object(g.jsx)(d.b,{to:"/",children:"HOME"})}),e.user?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("li",{children:Object(g.jsx)(d.b,{to:"/",onClick:function(){return t()},children:"LOG OUT"})}),Object(g.jsx)("li",{children:Object(g.jsx)(d.b,{to:"/furnace",children:"FURNACE"})}),Object(g.jsx)("li",{children:Object(g.jsx)(d.b,{to:"/offerings",children:"OFFERINGS"})}),Object(g.jsx)("li",{children:Object(g.jsx)(d.b,{to:"/ruleslist",children:"RULES SYSTEMS"})}),Object(g.jsx)("li",{children:Object(g.jsx)(d.b,{to:"/rulescreate",children:"CREATE RULES"})})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("li",{children:Object(g.jsx)(d.b,{to:"/signup",children:"SIGN UP"})}),Object(g.jsx)("li",{children:Object(g.jsx)(d.b,{to:"/login",children:"LOG IN"})})]})]})]})}var f=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={file:null},e.Upload=function(t){console.log(e.state.file.name);var n=e.state.file;if(n){var a=new FormData;a.append("name",e.state.file.name),a.append("file",n),b.a.post("/api/furnace",a).then((function(e){return console.log("processed the file: ",e.data)})).catch((function(e){return console.log(e)}))}},e.onChange=function(t){var n=t.target.files[0];console.log(n),e.setState({file:n})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=Object(g.jsx)(g.Fragment,{});return this.state.file&&(e=Object(g.jsx)("button",{onClick:this.Upload,children:"upload"})),Object(g.jsxs)("div",{children:[Object(g.jsxs)("form",{onSubmit:this.handleSubmit,encType:"multipart/form-data",children:[Object(g.jsx)("label",{htmlFor:"file",children:"File"}),Object(g.jsx)("input",{type:"file",accept:".jpg,.png",id:"file",onChange:this.onChange})]}),e]})}}]),n}(a.Component),v=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={offerings:null,lesserOfferings:null,waiting:!1},e.download=function(t){e.setState({waiting:!0}),b.a.get("/api/furnace/").then((function(t){e.setState({waiting:!1,offerings:t.data})})).catch((function(e){return console.log(e)}))},e.lesserDownload=function(){e.setState({waiting:!0}),b.a.get("/api/furnace/lesser").then((function(t){e.setState({waiting:!1,lesserOfferings:t.data})})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=Object(g.jsx)(g.Fragment,{}),t=Object(g.jsx)(g.Fragment,{}),n=Object(g.jsx)(g.Fragment,{});return this.state.offerings&&(t=Object(g.jsx)("a",{download:"greater-offering.jpg",href:this.state.offerings,children:"A GREATER OFFERING"})),this.state.lesserOfferings&&(n=Object(g.jsx)("a",{download:"lesser-offering.jpg",href:this.state.lesserOfferings,children:"A LESSER OFFERING"})),!0===this.state.waiting&&(e=Object(g.jsx)("p",{children:"please wait"})),Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:this.download,children:"RECIEVE A GREATER OFFERING"}),t,Object(g.jsx)("button",{onClick:this.lesserDownload,children:"RECIEVE A LESSER OFFERING"}),n,e]})}}]),n}(a.Component),y=n(13),S=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",message:""},e.changeHandler=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(y.a)({},a,s))},e.submitHandler=function(t){t.preventDefault();var n=e.state,a=n.username,s=n.password;m(a,s).then((function(t){t.message?e.setState({message:t.message,username:"",password:""}):(e.props.setUser(t),e.props.history.push("/"))}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(g.jsx)("div",{children:Object(g.jsxs)("form",{onSubmit:this.submitHandler,children:[Object(g.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(g.jsx)("input",{id:"username",type:"text",name:"username",value:this.state.username,onChange:this.changeHandler}),Object(g.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(g.jsx)("input",{id:"password",type:"password",name:"password",value:this.state.password,onChange:this.changeHandler}),Object(g.jsx)("button",{type:"submit",children:"SIGN UP"}),this.state.message&&Object(g.jsx)("p",{children:this.state.message})]})})}}]),n}(a.Component),F=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",message:""},e.changeHandler=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(y.a)({},a,s))},e.submitHandler=function(t){t.preventDefault();var n=e.state,a=n.username,s=n.password;O(a,s).then((function(t){t.message?e.setState({message:t.message,username:"",password:""}):(e.props.setUser(t),e.props.history.push("/"))}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(g.jsx)("div",{children:Object(g.jsxs)("form",{onSubmit:this.submitHandler,children:[Object(g.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(g.jsx)("input",{type:"text",id:"username",name:"username",value:this.state.username,onChange:this.changeHandler}),Object(g.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(g.jsx)("input",{type:"password",id:"password",name:"password",value:this.state.password,onChange:this.changeHandler}),Object(g.jsx)("button",{type:"submit",children:"LOG IN"}),this.state.message&&Object(g.jsx)("p",{children:this.state.message})]})})}}]),n}(a.Component),w=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={message:"",name:"",explanation:"",createdBy:null},e.submitHandler=function(t){t.preventDefault();var n=e.state,a=n.name,s=n.explanation;b.a.post("/api/rules",{name:a,explanation:s}).then((function(t){t.message?e.setState({message:t.message}):e.props.history.push("/")}))},e.changeHandler=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(y.a)({},a,s))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(g.jsx)("div",{children:Object(g.jsxs)("form",{onSubmit:this.submitHandler,children:[Object(g.jsx)("label",{htmlFor:"name",children:"Name the ruleset: "}),Object(g.jsx)("input",{type:"text",name:"name",id:"name",value:this.state.name,onChange:this.changeHandler}),Object(g.jsx)("label",{htmlFor:"name",children:"Explanation: "}),Object(g.jsx)("input",{type:"text",name:"explanation",id:"explanation",value:this.state.explanation,onChange:this.changeHandler}),Object(g.jsx)("button",{type:"submit",children:"CREATE RULES"}),this.state.message&&Object(g.jsx)("p",{children:this.state.message})]})})}}]),n}(a.Component);function E(e){return Object(g.jsx)("div",{children:e.rules.map((function(e){return Object(g.jsxs)("div",{className:"RuleLink",children:[Object(g.jsx)("h1",{children:Object(g.jsx)(d.b,{to:"/rule/".concat(e._id),children:e.name})}),e.extensions.length>0?Object(g.jsxs)("p",{children:["This ruleset has been extended: ",e.extensions.length," time(s)"]}):Object(g.jsx)(g.Fragment,{}),Object(g.jsxs)("p",{children:["created by : ",e.createdBy.username]})]},e._id)}))})}var C=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={rules:[],page:0,pages:0,loaded:!1},e.getRules=function(){b.a.get("/api/rules/").then((function(t){var n=0;e.state.page>0&&(n=2*e.state.page+1);for(var a=t.data.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})),s=[],r=n;r<n+5;r++){if(a.length<r)return;s.push(a[r])}var c=Math.round(t.data.length/5);e.setState({rules:s,pages:c,loaded:!0})})).catch((function(e){console.log(e)}))},e.clickUpHandler=function(){e.state.pages-1<e.state.page+1||(e.setState({page:e.state.page+1}),e.getRules())},e.clickDownHandler=function(){0!==e.state.page&&(e.setState({page:e.state.page-1}),e.getRules())},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getRules()}},{key:"render",value:function(){var e=Object(g.jsx)(g.Fragment,{});return!0===this.state.loaded&&(e=Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(E,{page:this.state.page,rules:this.state.rules}),"page: ".concat(this.state.page+1)]})),console.log(this.state.rules),Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:this.clickDownHandler,children:"PREVIOUS PAGE"}),Object(g.jsx)("button",{onClick:this.clickUpHandler,children:"NEXT PAGE"}),e]})}}]),n}(a.Component),R=n(32),H=function(e){var t=e.component,n=e.user,a=e.path,s=e.redirect,r=void 0===s?"/":s,c=Object(R.a)(e,["component","user","path","redirect"]);return Object(g.jsx)(j.b,{exact:!0,path:a,render:function(e){return n?Object(g.jsx)(t,Object(i.a)(Object(i.a)(Object(i.a)({},e),c),{},{user:n})):Object(g.jsx)(j.a,{to:r})}})},k=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={extension:null,ruleId:""},e.handleApproval=function(){var t=e.state.extension._id;console.log(t),b.a.put("/api/rules/approve/".concat(e.state.ruleId),{_id:t}).then((function(t){e.props.history.push("/ruleslist")}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({index:this.props.index,extension:this.props.extension,ruleId:this.props.rule})}},{key:"render",value:function(){return Object(g.jsx)("div",{children:this.state.extension?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("button",{onClick:this.handleApproval,children:["approve ",this.state.extension.extendedBy.username,"'s extension of your rule system"]})}):Object(g.jsx)(g.Fragment,{})})}}]),n}(a.Component),U=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={rule:null,toBeApproved:null},e.getRule=function(){b.a.get("/api/rules/rule/".concat(e.props.match.params.id)).then((function(t){e.setState({rule:t.data}),console.log("this is the state",e.state.rule.extensions.length)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getRule(),console.log(this.props.user)}},{key:"render",value:function(){var e=this,t=Object(g.jsx)(g.Fragment,{}),n=Object(g.jsx)(g.Fragment,{}),a=Object(g.jsx)(g.Fragment,{});return this.state.rule&&(n=Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:this.state.rule.name}),Object(g.jsx)("h3",{children:this.state.rule.explanation}),Object(g.jsxs)("p",{children:["created by : ",this.state.rule.createdBy.username]}),Object(g.jsx)(d.b,{to:"/extend/".concat(this.state.rule._id),children:"EXTEND THESE RULES"})]}),this.props.user._id===this.state.rule.createdBy._id&&(t=Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.b,{to:"/edit/".concat(this.state.rule._id),children:"EDIT"})})),this.state.rule.extensions.length>0&&(a=this.state.rule.extensions.map((function(t){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("h2",{children:["Extension by ",t.extendedBy.username]}),Object(g.jsx)("p",{children:t.extension}),e.props.user._id===e.state.rule.createdBy._id&&!1===t.approved?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(k,{history:e.props.history,rule:e.state.rule._id,extension:t})}):Object(g.jsx)(g.Fragment,{})]},t._id)})))),Object(g.jsxs)("div",{children:[n,t,a]})}}]),n}(a.Component),A=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={_id:null,name:"",explanation:"",message:""},e.getRule=function(){b.a.get("/api/rules/rule/".concat(e.props.match.params.id)).then((function(t){var n=t.data;console.log(t.data),e.setState({_id:n._id,name:n.name,explanation:n.explanation})})).catch((function(e){console.log(e)}))},e.submitHandler=function(t){t.preventDefault();var n=e.state,a=n.name,s=n.explanation;b.a.put("/api/rules/rule/".concat(e.state._id),{name:a,explanation:s}).then((function(t){t.message?e.setState({message:t.message}):e.props.history.push("/ruleslist")}))},e.changeHandler=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(y.a)({},a,s))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("mounted"),this.getRule()}},{key:"render",value:function(){var e=Object(g.jsx)(g.Fragment,{});return this.state._id&&(e=Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("form",{onSubmit:this.submitHandler,children:[Object(g.jsx)("label",{htmlFor:"name",children:"Name the ruleset: "}),Object(g.jsx)("input",{type:"text",name:"name",id:"name",value:this.state.name,onChange:this.changeHandler}),Object(g.jsx)("label",{htmlFor:"name",children:"Explanation: "}),Object(g.jsx)("input",{type:"text",name:"explanation",id:"explanation",value:this.state.explanation,onChange:this.changeHandler}),Object(g.jsx)("button",{type:"submit",children:"SUBMIT CHANGES"}),this.state.message&&Object(g.jsx)("p",{children:this.state.message})]})})),Object(g.jsx)("div",{children:e})}}]),n}(a.Component),N=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={_id:null,name:"",explanation:"",extension:"",message:""},e.getRule=function(){b.a.get("/api/rules/rule/".concat(e.props.match.params.id)).then((function(t){var n=t.data;console.log(t.data),e.setState({_id:n._id,name:n.name,explanation:n.explanation})})).catch((function(e){console.log(e)}))},e.submitHandler=function(t){t.preventDefault();var n=e.state.extension;b.a.put("/api/rules/extend/".concat(e.state._id),{extension:n}).then((function(t){t.message?e.setState({message:t.message}):e.props.history.push("/ruleslist")}))},e.changeHandler=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(y.a)({},a,s))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("mounted"),this.getRule()}},{key:"render",value:function(){var e=Object(g.jsx)(g.Fragment,{});return this.state._id&&(e=Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:this.state.name}),Object(g.jsx)("h3",{children:this.state.explanation}),Object(g.jsxs)("form",{onSubmit:this.submitHandler,children:[Object(g.jsxs)("label",{htmlFor:"name",children:['YOUR EXTENSION TO "',this.state.name,'" ']}),Object(g.jsx)("input",{type:"text",name:"extension",id:"name",value:this.state.extension,onChange:this.changeHandler}),Object(g.jsx)("button",{type:"submit",children:"SUBMIT EXTENSION"}),this.state.message&&Object(g.jsx)("p",{children:this.state.message})]})]})),Object(g.jsx)("div",{children:e})}}]),n}(a.Component),I=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={user:e.props.user},e.setUser=function(t){e.setState({user:t})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return console.log(this.state.user),Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(x,{user:this.state.user,setUser:this.setUser}),Object(g.jsxs)(j.d,{children:[Object(g.jsx)(H,{path:"/offerings",user:this.state.user,component:v}),Object(g.jsx)(H,{path:"/furnace",user:this.state.user,component:f}),Object(g.jsx)(H,{path:"/ruleslist",user:this.state.user,component:C}),Object(g.jsx)(H,{path:"/rulescreate",user:this.state.user,component:w}),Object(g.jsx)(H,{path:"/rule/:id",user:this.state.user,component:U}),Object(g.jsx)(H,{path:"/edit/:id",user:this.state.user,component:A}),Object(g.jsx)(H,{path:"/extend/:id",user:this.state.user,component:N}),Object(g.jsx)(j.b,{exact:!0,path:"/signup",render:function(t){return Object(g.jsx)(S,Object(i.a)({setUser:e.setUser},t))}}),Object(g.jsx)(j.b,{exact:!0,path:"/login",render:function(t){return Object(g.jsx)(F,Object(i.a)({setUser:e.setUser},t))}})]})]})}}]),n}(s.a.Component),_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};b.a.get("/api/auth/loggedin").then((function(e){var t=e.data;c.a.render(Object(g.jsx)(d.a,{children:Object(g.jsx)(I,{user:t})}),document.getElementById("root"))})).catch((function(e){console.log(e)})),_()}},[[66,1,2]]]);
//# sourceMappingURL=main.67cabfcf.chunk.js.map